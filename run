#!/bin/bash

./bento_init

mkdir results
if [ "$(ls -A results)" ]; then
	echo "uuh results is not empty"
	exit
fi

export MNT=/mnt/xv6fsll
./bento_prepare_disk
./bento_mount_disk
./redis
./rocksdb
#./filebenches/run
#./filebenches/process
./otherapps
cp -r $MNT/results ./results/Bento-fs
sudo find results -type d -exec chmod 755 {} \
sudo find results -type f -exec chmod 644 {} \
./umount


export MNT=/mnt/xv6fsll-user
./bento_mount_user
./redis
./rocksdb
#./filebenches/run
#./filebenches/process
./otherapps
cp -r $MNT/results ./results/Bento-user
sudo find results -type d -exec chmod 755 {} \
sudo find results -type f -exec chmod 644 {} \
./umount

export MNT=/mnt/xv6fsll-prov
./bento-prov_init
./bento_prepare_disk
./bento_mount_disk
./redis
./rocksdb
#./filebenches/run
#./filebenches/process
./otherapps
cp -r $MNT/results ./results/Bento-prov
sudo find results -type d -exec chmod 755 {} \
sudo find results -type f -exec chmod 644 {} \
./umount


export MNT=/mnt/ext4-o
./ext4_prepare_disk
./ext4-o_mount_disk
./redis
./rocksdb
#./filebenches/run
#./filebenches/process
./otherapps
cp -r $MNT/results ./results/ext4-ordered
sudo find results -type d -exec chmod 755 {} \
sudo find results -type f -exec chmod 644 {} \
./umount

export MNT=/mnt/ext4-j
./ext4_prepare_disk
./ext4-j_mount_disk
./redis
./rocksdb
#./filebenches/run
#./filebenches/process
./otherapps
cp -r $MNT/results ./results/ext4-journal
sudo find results -type d -exec chmod 755 {} \
sudo find results -type f -exec chmod 644 {} \
./umount

